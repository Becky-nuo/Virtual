虚拟化技术：
    含义：将任何一种形式的资源抽象另一种形式的技术都是虚拟化，虚拟化是资源的逻辑表示，其不受物理限制的约束；
    
    
    概念:   Guest OS  --->运行在虚拟机之上的OS；
            Guest Machine  --->虚拟出来的虚拟机；
            Hypervisor  ---> 虚拟化软件层/虚拟机监控机(Virtual Machine Monitor , VMM)；
            Host OS ---> 运行在物理机之上的OS；
            Host Machine --->物理机；



    虚拟化特点：
            分区:在单一物理服务器上同时运行多个虚拟机；
            隔离:在同一服务器上的多个虚拟机之间相互隔离；
            封装:整个虚拟机执行环境封装在独立文件中，可以通过移动文件的方式来迁移该虚拟机；
            相对于硬件独立:虚拟机无需修改，即可在任何服务器上运行；

    
    虚拟化架构：
            寄居虚拟化:  简单，易于实现，但管理开销较大，性能损耗大和依赖于主机操作系统对设备的支持  (厂家:VMware Workstation)；
            裸金属虚拟化: 不依赖于操作系统，支持多种操作系统、多种应用，但虚拟层内核开发难度大 (厂家:WMware EAXServer)；
            操作系统虚拟化: 简单，易于实现，管理开销非常低，但隔离性差，多容器共享同一操作系统(厂家:Virtuozzo)；
            混合虚拟化: 相对于寄居虚拟化架构，没有冗余，性能高,但需底层硬件支持虚拟化扩展功能(厂家:Redhat KVM)；


        VMM功能：
                虚拟资源:利用底层硬件资源来构建一个包含虚拟CPU、内存和外设等的虚拟环境
                虚拟环境的调度:构建多个虚拟机环境，允许多个Guest OS并发执行
                虚拟化环境的管理接口:提供一组完备的管理接口，来支持虚拟环境的创建、删除、暂停和迁移
        
        KVM:
                Guest:客户机系统，包括cpu、内存、驱动，被KVM置于一种受限制的CPU模式下运行；
                KVM:运行在内核空间，提供CPU和内存的虚级化，以及客户机的I/O拦截；
                QEMU:修改过的为KVM虚拟使用的QEMU代码，运行在用户空间，提供硬件I/O虚拟化；

        XEN:
                Xen Hypervisor:直接运行于硬件之上，是Xen客户操作系统与硬件资源之间的访问接口；
                Domain O:运行在Xen管理程序之上，具有直接访问硬件和管理其他客户操作系统的特权的客户操作系统；
                Domain U:运行在Xen管理程序之上的普通客户操作系统或业务操作系统，不能直接访问硬件资源，可以独立并行的存在多个；

计算机虚拟化：
        CPU虚拟化：全虚拟化、半虚拟化、硬件辅助虚拟化；
        内存虚拟化：虚拟内存(Va)、物理内存(pa)、机器内存(Ma)；
        IO虚拟化：全虚拟化、半虚拟化、io透传；
        内存地址：内存都是从0开始的、内存的地址空间是连续的；


        内存复用技术：
                内存复用:是指在服务器物理内存一定的情况下，通过综合运用内存复用的单项技术，对内存进行分时复用；
                智能内存复用:可提升内存资源的利用率，帮助用户节省内存采购成本，延长物理服务器升起内存的周期；
                
                内存交换:将外部存储虚拟成内存给虚拟机使用，将虚拟机上暂时不用的数据存放到外部存储上；
                内存共享:多台虚拟机共享数据内容为零的内容页；
                内存气泡:系统主动回收虚拟机暂时不用的物理内存，分配给需要复用内存的虚拟机；

        特点与价值：
                内存复用比提升至150%，业内领先；
                同等内存资源条件下，虚拟机密度可提升50%，从而降低硬件（内存）采购成本；


I/O虚拟化：
    模拟(完全虚拟):完全使用软件来模拟真实硬件，模拟通常硬件，性能很差；
    半虚拟化：对硬件驱动由前端直接分配给后端调用，通常仅适用于硬盘和网卡、性能高；
    IO-through:IO透传，直接分配给虚拟机物理设备，需要硬件支持；

    DomU：运行在Xen Hypervisor 上的普通虚拟机；
    Dom0：运行在Xen Hypervisor 之上的特权虚拟机，有访问物理I/O资源的权限；

    虚拟机复用有限的外设资源：
        VMM截获客户OS对设备的访问请求，然后通过软件的方式来模拟真实设备的效果；
        前端设备驱动将数据通过VMM提供的接口转发到后端驱动；
        后端驱动VMM的数据进行分时分通道进行处理；


CPU虚拟化：
        CPU资源限额：控制虚拟机占用物理资源的上限；
        CPU资源份额：CPU份额定义多个虚拟机在竞争物理CPU资源的时候按比例分配计算资源；
        CPU资源预留：CPU预留定义了多个虚拟机竞争物理CPU资源的时候分配的最低计算资源；


内存虚拟化：
        虚拟机内存分配：
                Host physical memory 指虚拟机管理程序可用的内存；
                Guest physical memory 指的是运行在VM上的Guest OS 可用的内存；
                Guest physical memory 指Guest OS 向应用程序提交的一个连续的虚拟地址空间；

        主机内存超分配：
                Host Memory 和 Guest memory 之间并不是一一对应；
                可以超额分配内存给VM；
                通过内存复用技术实现超分配功能，如：物理内存共4G，但上层三个GuestOS的分配的总内存达到6G；

        内存复用技术：
                内存共享：虚拟机之间共享同一个物理内存空间，虚拟机对内存做只读操作；
                写时复制：当虚拟机需要对内存进行写操作时，开辟另一内存空间，并修改映射；
                内存置换：虚拟机长时间未访问的内存内容被置换到存储中，并建立映射，当虚拟机再次访问该内存内容时在置换；
                内存气泡：Hypervisor 通过内存气泡将较为空闲的虚拟机的内存释放给内存使用率较高的虚拟机，从而提升内存利用率；

        虚拟机内存：
                内存预留：虚拟机预留的最低物理内存；
                内存份额：适用资源复用场景，按 比例分配内存份额；


FusionCompute 关键特性：
        虚拟机生命周期管理：虚拟机基本的生命周期管理动作，包括创建、删除、启动、关闭、重启、休眠、唤醒、分组管理等；
        
        虚拟机热迁移：
                技术特点：
                        基于内存压缩传输技术，虚拟机热迁移效率提升1倍
                        虚拟机磁盘数据位置不变，只更改映射关系；

                适用场景：
                        可容忍短时间中断，但必须要快熟恢复业务，如：轻量级数据库业务、桌面云业务；

        存储热迁移：
                技术特点：热迁移可以使客户可以在业务无损的情况下动态调整虚拟机存储资源，以实现设备维护，
                存储DRS资源调整等操作；

        
        无共享热迁移：
                技术特点：将源物理机指定的处于运行状态的非共享存储虚拟机迁移到另一台物理机，
                以实现不同存储介质上的虚拟机在不同节点之间无缝在线迁移；

        
        热迁移应用场景：服务器下电维护、新老硬件切换、数据迁移、本地虚拟机迁移、性能优化、服务器补丁升级；

        异构热迁移：
                跨代处理器使用不同的处理器架构，CPU特性不兼容，因此不能直接进行虚拟机热迁移；
                新架构CPU调整为旧架构CPU运行模式，使集群内所有主机运行在相同的CPU模式；
                集群内一台主机CPU版本较低，则集群需要运行在较低的模式，导致整体性能降低，资源浪费；
                支持的最高CPU指令集；

        异构迁移功能特性配置：
                在集群资源控制一IMC配置中开启IMC模式；
                支持六种IMC模式。由低到高：Merom、Penryn、Nehalem、Westmere、Sandy Bridge、Ivy Bridge；

        
        克隆虚拟机：
                克隆后的虚拟机与被克隆的虚拟机在克隆的时间点有同样的配置和数据；
                支持批量克隆虚拟机；
                虚拟机克隆时可变更硬件配置；
                可以将虚拟机克隆为模板；

        
        虚拟机分组管理：
                使用虚拟机文件夹管理虚拟机，便于对不同业务需求的虚拟机进行分类管理；
                使用拖拽方式直接将虚拟机拖拽到指定文件夹；
                支持多级子文件夹；

        NUMA：
                非一致性内存架构解决了多处理器系统中的可扩展性问题；
                NUMA技术将CPU划分成不同的组，每个Node由一个或多个CPU组成并且有独立的本地内存、I/O等资源；
                CPU访问同Node中内存速度最快，访问其他Node中内存性能较差；

        
        DRS动态资源调度：
                技术特点：
                        同一集群内，VM由系统根据策略自动负载均衡；
                        负载均衡算法优化，避免VM无效迁移；

                适用场景：
                        负载均衡确保业务性能；
                        削峰填谷，避免高峰期的拥塞；

        
        DPM分布式电源管理：
                技术特点：
                        系统自动选择合适的物理机上下电，减少迁移VM数量；
                        保证小部分物理机处理休眠态，以快速满足新增业务所需资源；

                适用场景：
                        夜间低负载，自动迁移虚拟机，下电空闲主机；
                        日间业务需求上升，自动上电主机，迁移虚拟机到新上电主机；


        计算资源调度：
                DRS 和DPM 分别设定自定义调度策略；
                按照小时为级别设定迁移值；

        
        虚拟机规则组：
                聚集虚拟机：列出的虚拟机必须在同一个主机上运行；
                互斥虚拟机：列出的虚拟机必须在不同主机上运行；
                虚拟机到主机：虚拟机组的成员是否能在特定主机组的成员上运行；

        
        虚拟外设：
                虚拟机必须有硬件包括CPU、内存、磁盘和网卡；
                可以关联的硬件包括图形处理器GPU，USB设备以及光驱；

        








