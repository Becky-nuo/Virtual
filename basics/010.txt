虚拟化中的存储架构

VIMS (Virtual Image Manage System)
    VIMS:
        高性能集群文件系统，是Thin Provisioning.快照、存储迁移等高级特性的技术基础。
        兼容FC SAN、IPSAN、NAS、本地磁盘。
        支持固定空间磁盘、动态空间磁盘、差分磁盘等。

    应用场景:需要存储迁移、快照、链接克隆等高级存储特性虚拟机。

常用虚拟机磁盘格式及支持的厂商:
    RAW ---> 各厂商通用
    VMDK---> VMware
    VHD ---> 微软Hyper-V、华为FusionCompute
    QCOW ---> QEMU或KVM虚拟化平台专用的格式
    QED ---> QEMU或KVM虚拟化平台专用的格式
    VDI ---> Oracle
    (一个磁盘对应一个磁盘文件)



华为虚拟化产品存储架构:
    数据存储：裸设备映射、虚拟化存储、非虚拟化存储
    存储设备：LUN、共享目录
    存储资源：FusonStorage、SAN/NA5



华为云计算存储模型:
    存储资源:存储资源表示物理存储设备,例如：IP SAN、Advanced SAN、NAS等;

    
    存储设备:
        存储设备表示存储资源中的管理单元，类似LUN、Advanced SAN存储池、NAS共享目录等；
        一个存储资源可以有多个存储设备；

    
    数据存储:
        数据存储表示系统中可管理、操作的存储逻辑单元;
        一个数据存储和一个存储设备对应;
        数据存储重载了具体的虚拟机业务，例如:创建磁盘等;

    
    磁盘类型:
        普通：普通磁盘只能单个虚拟机使用;
        共享：共享磁盘可以绑定给多个虚拟机使用;


    
    配置模式:
            普通:根据磁盘容量为磁盘分配空间，在创建过程中会将物理设备上保留的数据置零，
        这种格式的磁盘性能要优于其他两种磁盘格式，但创建这种格式的磁盘所需的时间可
        能会比创建其他类型的磁盘长，建议系统盘使用该模式。

        精简:该模式下，系统首次仅分配磁盘容量配置值的部分容量，后续根据使用情况，逐步进行分配，
        直到分配总量达到磁盘容量配置值为止，数据存储类型为"FusionStorage" 或"本地内存盘"时，
        只支持该模式;数据存储类型为“本地硬盘”或“SAN存储”时，不支持该模式。

        普通延迟置零:根据磁盘容量为磁盘分配空间，创建时不会擦除物理设备上保留的任何数据，
        但后续从虚拟机首次执行写操作时会按需要将其置零。创建速度比“普通”模式快; 性能介于“普通”
        和“精简”两种模式之间。只有数据存储类型为“虚拟化本地硬盘”、"虚拟化SAN存储”或版本号为V3
        的"Advanced SAN存储”时，支持该模式;

    磁盘模式:
        从属:快照中包含该从属磁盘。
        
        独立持久:更改将立即并永久写入磁盘，持久磁盘不受快照影响。即对虚拟机创建快照时，不对该磁盘
        的数据进行快照，该磁盘的数据进行还原；
        
        独立-非持久:关闭电源或恢复快照后，丢弃对该磁盘的更改；